\input{preambule_article.tex}
\tikzset{
  treenode/.style = {shape=rectangle, rounded corners,
                     draw, align=center,
                     top color=white, bottom color=white!20},
  root/.style     = {treenode, font=\ttfamily\normalsize, bottom color=white!20},
  env/.style      = {treenode, font=\ttfamily\normalsize},
  dummy/.style    = {circle,draw}
}
\begin{document}
\input{title.tex}
\newpage 

\tableofcontents
\newpage
\section{Введение}
\paragraph{Цель работы:} Обучить нейросеть определять что человек дышит. На вход нейросети будут поданы данные с датчика дыхания и кадры с камеры. После чего нейросеть образует связть между данными и сможет опредять дыхание человека по камере.
\section{Устройство}
\subsection{Функциональная схема}
Схема устройства будет состоять из 4 основных частей.
\linespread{1.3}
\begin{center}
\begin{tikzpicture}
  [
    grow                    = left,
    sibling distance        = 6em,
    level distance          = 10em,
    edge from parent/.style = {draw, -latex},
    every node/.style       = {font=\footnotesize},
    sloped
  ]
  \node [root] {тензодатчик}
    child { node [env] {АЦП}
      child { node [env] {микроконтроллер}
        child { node [env] {ноутбук}
        edge from parent node [below] {} }
      edge from parent node [below] {} }
    edge from parent node [below] {} }; 
    
\end{tikzpicture}
\end{center}
\begin{enumerate}
\item \textbf{Тензодатчик}. Возьмем тензодатчик (рис.1).


	\begin{figure}[h]
		\centering
		\includegraphics[height= 5cm]{фото_1.png}
		\caption{ТЕНЗОДАТЧИКИ}
	\end{figure}


\item \textbf{АЦП}. В качестве АЦП можно свять модуль HX711. 

\url{https://cdn.sparkfun.com/datasheets/Sensors/ForceFlex/hx711_english.pdf}

\textbf{Спецификация HX711}
 \begin{enumerate}
 \item[1] Разрядность АЦП: 24 бит;
 \item[2] Коэффициент усиления: Вход А: 64 или 128;
 \item[3] Частота измерений: 80 Гц;
 \item[4] Напряжение питания: 5В;
 \item[5] Потребляемый ток: до 10 мА;;
 \end{enumerate}
\newpage

	\begin{figure}[h]
		\centering
		\includegraphics[height= 5cm]{3}
		\caption{АЦП HX711}
	\end{figure}

\item \textbf{Микроконтроллер}. В качестве Микроконтроллер можно взять STM (рис.4)

	\begin{figure}[h]
		\centering
		\includegraphics[height= 5cm]{stm}
		\caption{Микроконтроллер на stm}
	\end{figure}

\item \textbf{Питание}. Питание схемы будет осуществляться через подключение к ноутбуду через мини usb. 

\section{Крепление}

Крепление датчика к груди с помощью бельевой резинке(рис.6) и застежка Фастекс(рис.7). Чтобы регулировать длину резинки можно использовать пластиковую пряжку (рис.5).

	\begin{figure}[h]
		\centering
		\includegraphics[height= 5cm]{6}
		\caption{пластиковая пряжка}
	\end{figure}

\newpage

\begin{figure}[h]
\begin{center}
\begin{minipage}[h]{0.4\linewidth}
\includegraphics[height= 5cm]{5}
\caption{бельевая резинка} %% подпись к рисунку
\label{ris:experimoriginal} %% метка рисунка для ссылки на него
\end{minipage}
\hfill
\begin{minipage}[h]{0.4\linewidth}
\includegraphics[height= 5cm]{7}
\caption{застежка Фастекс}
\label{ris:experimcoded}
\end{minipage}
\end{center}
\end{figure}
\end{enumerate}
\section{Контсрукция тензодатчиков}
\begin{enumerate}

\item В конструкции будут использоватся 2 тензодатчика, основа. Конструкция будет находится на груди.

	\begin{figure}[h]
		\centering
		\includegraphics[height= 8cm]{конструкция_4}
		\caption{конструкция тензодатчиков}
	\end{figure}
\section{Собранная схема}

Схема состоит из тензодатчиков, АЦП HX711, stm32, uart конвертора(для оющения с  COM-портом). Тензодатчики крепятся к груди с помощью резинки. Из полученных точек можно построить график (рис.9). Фактическая частота снятия данных 90 Гц. Видно что первая половина графика соответсвует дыханию человека. На третьем вдохе испытуемый говорил. Из двух тензодаитчиков работает только один.

На рисунке 10 можно увидеть как датчик крепится к человеку.

	\begin{figure}[h]
		\centering
		\includegraphics[height= 7cm]{8}
		\caption{Собраная схема}
	\end{figure}

	\begin{figure}[h]
		\centering
		\includegraphics[height= 7cm]{Figure_1}
		\caption{график полученных значений}
	\end{figure}	
	
Массив данных в .csv файле: 
\url{https://github.com/Quargam/breath-sensor/tree/main/code/PySerial}	

	\begin{figure}[h]
		\centering
		\includegraphics[height= 5cm]{10}
		\caption{крепление датчика}
	\end{figure}	
		
	

\end{enumerate} 
\end{document}